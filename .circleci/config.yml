# Javascript Node CircleCI 2.0 configuration file
#
# Check https://circleci.com/docs/2.0/language-javascript/ for more details
#
version: 2

general:
  branches:
    only:
      - master
machine:
  node:
    version: 5.0.0
dependencies:
  pre:
    - npm install
    - echo "//packagecloud.io/armando/test/npm/:_authToken=$NPM_TOKEN" >> ~/.npmrc
steps:
  - checkout
  # run tests!
  - run: yarn test
deployment:
  production:
    tag: /v\d.*/
    commands:
      - npm publish